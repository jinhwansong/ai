import { NewsArticle } from '@/types/news';

export const buildDailyPrompt = (news: NewsArticle[]) => `
당신은 글로벌 금융·경제 데이터를 분석하는 전문 애널리스트입니다.

아래는 오늘자 글로벌 경제 뉴스 목록입니다.  
이 뉴스들을 기반으로 “당일 세계 경제 흐름”을 3~5개의 핵심 이슈로 재구성한  
하루 요약형 경제 리포트를 작성하세요.

요구사항:

1) 원본 텍스트는 영어지만, 최종 출력은 자연스럽고 읽기 쉬운 "완전한 한국어"로 작성하세요.  
   경제 전문 매체가 작성한 것처럼 정확하고 전문적인 문체로 요약합니다.

2) 전체 뉴스를 단순 나열하지 말고, 서로 연관된 이벤트를 하나의 “이슈”로 묶어  
   3~5개의 핵심 흐름으로 재구성하세요.

3) 각 이슈는 반드시 다음 3가지 필드를 포함해야 합니다:
   - title: 경제 흐름을 대표하는 한국어 핵심 제목(간결하고 1줄)
   - summary: 해당 이슈의 핵심 내용과 배경을 2~4줄로 요약
   - koreaImpact: 이 글로벌 이슈가 한국 경제·한국 증시(KOSPI/KOSDAQ)·금리·환율·수출 산업 등에
     미칠 수 있는 영향 분석

4) 분석 시 고려해야 할 주요 경제 변수:
   - 금리 및 통화정책(Fed, ECB 등)
   - 환율(원·달러, 엔·달러, 위안 등)
   - 글로벌 증시 흐름(NASDAQ, S&P500 등)
   - 반도체·자동차·에너지·AI 등 주요 산업군
   - 유가·원자재 가격
   - 지정학적 리스크

5) 반드시 아래 JSON 형식으로 출력하세요.  
   JSON 외의 문장은 절대 포함하지 말고, 모든 문자열은 null 대신 ""로 채워 주세요.

출력 형식(JSON):
{
  "date": "<YYYY-MM-DD>",
  "issues": [
    {
      "title": "",
      "summary": "",
      "koreaImpact": ""
    }
  ]
}

분석 대상 뉴스 목록:
${news
  .map((n, i) => `${i + 1}. 제목: ${n.title}\n   요약: ${n.description ?? ''}`)
  .join('\n\n')}
`;
